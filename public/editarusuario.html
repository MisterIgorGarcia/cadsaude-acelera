<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Editar Usuário</title>
</head>
<body>
  <h1>Editar Usuário</h1>
  <form onsubmit="return enviarFormulario();">
    <input type="hidden" id="userid">
    <input type="text" id="username" placeholder="Novo login" required>
    <input type="password" id="password" placeholder="Nova senha" required>
    <button type="submit">Atualizar</button>
  </form>
  <script>
    // Função para carregar os dados do usuário para edição
    function carregarUsuario() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get('id');
      fetch('/public/editarusuario/' + id)
        .then(response => response.json())
        .then(data => {
          const usuario = data[0];
          document.getElementById('username').value = usuario.username;
          document.getElementById('userid').value = usuario.id;
        });
    }

    // Função para enviar o formulário
    function enviarFormulario() {
      const id = document.getElementById('userid').value;
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      fetch('/public/editarusuario/' + id, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ username, password }),
      })
      .then(response => response.text())
      .then(data => {
        alert(data);
      });

      return false; // Para evitar o recarregamento da página
    }

    window.onload = carregarUsuario;
    </script>
</body>
</html>
